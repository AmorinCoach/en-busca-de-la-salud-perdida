!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a Interactiva para la Salud del Disco Intervertebral</title>
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: The application is structured as a narrative journey in five thematic sections to maximize user engagement and understanding. 1) 'La Base': Introduces the disc's anatomy. 2) 'El C√≠rculo Vicioso': Visually explains the core problem of degeneration. 3) 'Tu Kit Nutrac√©utico': An interactive dashboard to explore beneficial compounds. 4) 'Saboteadores': Highlights harmful lifestyle factors. 5) 'Estrategia Integral': Provides a holistic action plan. This thematic, story-driven structure was chosen over a linear report format to make the complex scientific information more digestible, relatable, and actionable for the user. -->
    <!-- Visualization & Content Choices: The application uses a mix of visualizations, all rendered on Canvas via Chart.js, to match the information's goal. [Inform] Donut chart for disc composition. [Organize/Relate] Custom HTML/CSS/JS diagram for the vicious cycle. [Compare/Inform] Bar and Radar charts for nutraceutical efficacy. [Compare/Inform] Interactive horizontal bar chart for lifestyle saboteurs' impact. [Organize] Styled HTML cards for the final strategy. This selection avoids SVG/Mermaid and uses interactivity (tabs, clickable elements) to reveal information progressively, preventing cognitive overload and enhancing user exploration within the designed structure. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            font-family: 'Source Sans 3', sans-serif;
            background-color: #F8F7F4;
            color: #4A4A4A;
        }
        h1, h2, h3 {
            font-family: 'Roboto Slab', serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link.active {
            color: #A37E2C;
            border-bottom: 2px solid #A37E2C;
            transform: translateY(-2px);
        }
        .tab.active {
            background-color: #A37E2C;
            color: #FFFFFF;
        }
        .flow-node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .flow-node.active, .flow-node:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(163, 126, 44, 0.3), 0 4px 6px -2px rgba(163, 126, 44, 0.1);
            border-color: #A37E2C;
        }
        .saboteur-bar {
             cursor: pointer;
        }
    </style>
</head>
<body>

    <nav id="navbar" class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-center items-center h-16 space-x-4 md:space-x-8">
                <a href="#intro" class="nav-link text-gray-600 hover:text-[#A37E2C] font-semibold p-2">INICIO</a>
                <a href="#cycle" class="nav-link text-gray-600 hover:text-[#A37E2C] font-semibold p-2">EL PROBLEMA</a>
                <a href="#toolkit" class="nav-link text-gray-600 hover:text-[#A37E2C] font-semibold p-2">SOLUCIONES</a>
                <a href="#saboteurs" class="nav-link text-gray-600 hover:text-[#A37E2C] font-semibold p-2">RIESGOS</a>
                <a href="#strategy" class="nav-link text-gray-600 hover:text-[#A37E2C] font-semibold p-2">ESTRATEGIA</a>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-6 py-12">

        <section id="intro" class="scroll-mt-20">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-[#3B3A36] mb-4">La Gu√≠a Definitiva para la Salud Discal</h1>
                <p class="text-lg md:text-xl text-[#6B6A66] max-w-3xl mx-auto">Una exploraci√≥n interactiva de la ciencia detr√°s de la degeneraci√≥n discal y c√≥mo un enfoque nutrac√©utico puede proteger y revitalizar tu columna.</p>
            </div>

            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 grid grid-cols-1 md:grid-cols-5 gap-8 items-center">
                <div class="md:col-span-3">
                    <h2 class="text-3xl font-bold text-[#3B3A36] mb-4">La Base: Anatom√≠a de tu Amortiguador Natural</h2>
                    <p class="mb-4">El disco intervertebral es una maravilla de la ingenier√≠a biol√≥gica, dise√±ado para dar flexibilidad y absorber impactos. Se compone de un n√∫cleo pulposo gelatinoso, rico en agua, que act√∫a como un coj√≠n hidr√°ulico; un anillo fibroso resistente que lo contiene; y placas terminales que facilitan el paso de nutrientes. La salud de esta estructura es vital para una columna sin dolor.</p>
                    <p class="text-sm text-gray-500">Un disco sano es predominantemente agua. Esta hidrataci√≥n, mantenida por mol√©culas llamadas proteoglicanos, es la clave de su capacidad para resistir la compresi√≥n diaria.</p>
                </div>
                <div class="md:col-span-2">
                    <div class="chart-container" style="height: 250px; max-height: 250px;">
                        <canvas id="discCompositionChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="cycle" class="mt-20 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3B3A36] mb-4">El C√≠rculo Vicioso de la Degeneraci√≥n</h2>
                <p class="text-lg text-[#6B6A66] max-w-3xl mx-auto">La degeneraci√≥n discal no es un evento aislado, sino una cascada destructiva. La inflamaci√≥n, el estr√©s oxidativo y la degradaci√≥n de la matriz se retroalimentan, creando un ciclo que acelera el da√±o. Haz clic en cada etapa para entender los actores moleculares.</p>
            </div>
            <div class="relative">
                <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-16">
                    <div id="flow-inflammation" class="flow-node bg-white rounded-2xl shadow-lg p-6 text-center border-2 border-transparent w-full md:w-1/4">
                        <div class="text-4xl mb-2">üî•</div>
                        <h3 class="text-xl font-bold text-[#A37E2C]">Inflamaci√≥n Cr√≥nica</h3>
                    </div>
                    <div id="flow-stress" class="flow-node bg-white rounded-2xl shadow-lg p-6 text-center border-2 border-transparent w-full md:w-1/4">
                         <div class="text-4xl mb-2">üí•</div>
                        <h3 class="text-xl font-bold text-[#A37E2C]">Estr√©s Oxidativo</h3>
                    </div>
                    <div id="flow-degradation" class="flow-node bg-white rounded-2xl shadow-lg p-6 text-center border-2 border-transparent w-full md:w-1/4">
                         <div class="text-4xl mb-2">üìâ</div>
                        <h3 class="text-xl font-bold text-[#A37E2C]">Degradaci√≥n Matriz</h3>
                    </div>
                </div>
                <div id="flow-explanation" class="mt-8 bg-[#E9E4D8] rounded-2xl p-6 text-center min-h-[120px] flex items-center justify-center transition-opacity duration-500 opacity-0">
                    <p id="flow-text" class="text-[#3B3A36]"></p>
                </div>
            </div>
        </section>

        <section id="toolkit" class="mt-20 scroll-mt-20">
             <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3B3A36] mb-4">Tu Kit de Herramientas Nutrac√©utico</h2>
                <p class="text-lg text-[#6B6A66] max-w-3xl mx-auto">La ciencia ha identificado compuestos clave que pueden interrumpir el ciclo degenerativo y apoyar la regeneraci√≥n. Explora estas categor√≠as para descubrir c√≥mo funcionan.</p>
            </div>
            <div class="flex justify-center flex-wrap gap-2 mb-8">
                <button class="tab active" data-tab="builders">Constructores de Matriz</button>
                <button class="tab" data-tab="fighters">Guerreros Anti-inflamaci√≥n</button>
                <button class="tab" data-tab="synergy">Sinergia Vitam√≠nica</button>
            </div>
            <div id="toolkit-content" class="bg-white rounded-2xl shadow-lg p-6 md:p-8">
                <!-- Content will be injected by JS -->
            </div>
        </section>

        <section id="saboteurs" class="mt-20 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3B3A36] mb-4">Saboteadores del Estilo de Vida</h2>
                <p class="text-lg text-[#6B6A66] max-w-3xl mx-auto">Ciertas decisiones diarias pueden acelerar dr√°sticamente la degeneraci√≥n discal, alimentando la inflamaci√≥n y da√±ando la estructura de tu columna. Haz clic en las barras para ver el mecanismo de da√±o.</p>
            </div>
            <div class="bg-white rounded-2xl shadow-lg p-6 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <div class="chart-container" style="max-width: 100%;">
                        <canvas id="saboteursChart"></canvas>
                    </div>
                </div>
                <div id="saboteur-explanation" class="bg-[#E9E4D8] rounded-2xl p-6 min-h-[200px] flex flex-col justify-center">
                    <h3 id="saboteur-title" class="text-xl font-bold text-[#A37E2C] mb-2">Selecciona un factor</h3>
                    <p id="saboteur-text" class="text-[#3B3A36]">Elige una de las barras para conocer en detalle c√≥mo afecta negativamente a la salud de tus discos.</p>
                </div>
            </div>
        </section>

        <section id="strategy" class="mt-20 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-[#3B3A36] mb-4">La Estrategia Integral: Uniendo las Piezas</h2>
                <p class="text-lg text-[#6B6A66] max-w-3xl mx-auto">La suplementaci√≥n es poderosa, pero funciona mejor como parte de un enfoque hol√≠stico. Combina nutrici√≥n, hidrataci√≥n y movimiento para una salud espinal √≥ptima y duradera.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl mb-4">ü•¶</div>
                    <h3 class="text-xl font-bold text-[#3B3A36] mb-2">Dieta Anti-inflamatoria</h3>
                    <p>Prioriza frutas, verduras, grasas saludables y prote√≠nas magras. Reduce az√∫cares y alimentos procesados para no alimentar la inflamaci√≥n.</p>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl mb-4">üíß</div>
                    <h3 class="text-xl font-bold text-[#3B3A36] mb-2">Hidrataci√≥n Constante</h3>
                    <p>Bebe 2-3 litros de agua al d√≠a. Es la forma m√°s directa de mantener la turgencia y capacidad de amortiguaci√≥n de tus discos.</p>
                </div>
                 <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl mb-4">üèÉ‚Äç‚ôÇÔ∏è</div>
                    <h3 class="text-xl font-bold text-[#3B3A36] mb-2">Movimiento Inteligente</h3>
                    <p>El ejercicio moderado nutre los discos. Fortalece tu 'core' para dar soporte a la columna, pero evita movimientos que causen dolor.</p>
                </div>
                <div class="bg-white rounded-2xl shadow-lg p-6 text-center">
                    <div class="text-4xl mb-4">üë®‚Äç‚öïÔ∏è</div>
                    <h3 class="text-xl font-bold text-[#3B3A36] mb-2">Consulta Profesional</h3>
                    <p>Habla siempre con un profesional de la salud antes de iniciar cualquier r√©gimen de suplementos para asegurar que sea adecuado para ti.</p>
                </div>
            </div>
        </section>

    </div>

    <footer class="bg-[#3B3A36] text-white mt-20 py-8">
        <div class="container mx-auto text-center">
            <p>Esta gu√≠a interactiva es una herramienta educativa basada en investigaci√≥n cient√≠fica. No reemplaza el consejo m√©dico profesional.</p>
            <p class="text-sm mt-2 opacity-70">Dise√±ado para la exploraci√≥n y el entendimiento.</p>
        </div>
    </footer>

    <script>
        const warmNeutralPalette = {
            dark: '#3B3A36',
            medium: '#6B6A66',
            accent: '#A37E2C',
            light: '#E9E4D8',
            background: '#F8F7F4',
            white: '#FFFFFF',
            negative: '#C70039'
        };

        const flowData = {
            inflammation: {
                title: 'Inflamaci√≥n Cr√≥nica üî•',
                text: 'Citoquinas como IL-1Œ≤ y TNF-Œ± act√∫an como se√±ales de alarma constantes, activando enzimas que degradan la matriz y promoviendo la muerte celular a trav√©s de la v√≠a NF-Œ∫B.'
            },
            stress: {
                title: 'Estr√©s Oxidativo üí•',
                text: 'Un exceso de radicales libres (ROS) da√±a directamente las c√©lulas y prote√≠nas del disco. Este estr√©s tambi√©n intensifica la respuesta inflamatoria, alimentando el ciclo.'
            },
            degradation: {
                title: 'Degradaci√≥n de la Matriz üìâ',
                text: 'Enzimas como las MMPs y ADAMTSs, activadas por la inflamaci√≥n, act√∫an como "tijeras moleculares", destruyendo el col√°geno y los proteoglicanos, lo que causa deshidrataci√≥n y p√©rdida de altura del disco.'
            }
        };
        
        const saboteurData = {
            smoking: {
                title: 'üö¨ Tabaquismo',
                text: 'La nicotina provoca vasoconstricci√≥n, reduciendo el vital flujo de nutrientes al disco. Adem√°s, es directamente t√≥xica para las c√©lulas discales, inhibiendo su capacidad de reparaci√≥n y aumentando el estr√©s oxidativo.'
            },
            alcohol: {
                title: 'üç∑ Consumo Excesivo de Alcohol',
                text: 'El alcohol deshidrata el cuerpo, incluyendo el n√∫cleo pulposo, reduciendo su capacidad de amortiguaci√≥n. Tambi√©n promueve la inflamaci√≥n sist√©mica y la producci√≥n de radicales libres (ROS) durante su metabolismo.'
            },
            sugar: {
                title: 'üç∞ Exceso de Az√∫car y Grasas',
                text: 'El az√∫car promueve la formaci√≥n de Productos Finales de Glicaci√≥n Avanzada (AGEs). Estos AGEs "caramelizan" y endurecen las fibras de col√°geno, haciendo al disco m√°s r√≠gido y fr√°gil, adem√°s de potenciar la inflamaci√≥n sist√©mica.'
            }
        };

        const toolkitContent = {
            builders: `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-2xl font-bold text-[#A37E2C] mb-3">Constructores de Matriz: Los Ladrillos</h3>
                        <p>Estos nutrac√©uticos proporcionan las materias primas o estimulan a las c√©lulas del disco para que sinteticen los componentes estructurales clave: proteoglicanos y col√°geno. Su acci√≥n es fundamental para mantener la hidrataci√≥n y la integridad del disco.</p>
                        <p class="mt-4 text-sm text-gray-500">El gr√°fico de la derecha muestra el potencial relativo de estos compuestos para estimular la s√≠ntesis de la matriz, un pilar del proceso anab√≥lico (reconstructivo).</p>
                    </div>
                    <div>
                        <div class="chart-container">
                            <canvas id="buildersChart"></canvas>
                        </div>
                    </div>
                </div>`,
            fighters: `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="text-2xl font-bold text-[#A37E2C] mb-3">Guerreros Anti-inflamaci√≥n: Los Pacificadores</h3>
                        <p>Este grupo de potentes compuestos bioactivos interrumpe el c√≠rculo vicioso de la degeneraci√≥n en su n√∫cleo: la inflamaci√≥n y el estr√©s oxidativo. Act√∫an sobre m√∫ltiples v√≠as moleculares para proteger las c√©lulas y preservar la matriz.</p>
                         <p class="mt-4 text-sm text-gray-500">El gr√°fico de radar muestra la capacidad multifac√©tica de estos compuestos. Una puntuaci√≥n alta en un eje indica una fuerte actividad en esa √°rea (p. ej., inhibici√≥n de NF-Œ∫B, el "interruptor maestro" de la inflamaci√≥n).</p>
                   </div>
                    <div>
                        <div class="chart-container">
                            <canvas id="fightersChart"></canvas>
                        </div>
                    </div>
                </div>`,
            synergy: `
                <div class="text-center">
                    <h3 class="text-2xl font-bold text-[#A37E2C] mb-4">Sinergia Vitam√≠nica: El D√∫o Din√°mico</h3>
                    <p class="max-w-2xl mx-auto mb-8">Las vitaminas D3 y K2 trabajan en perfecta armon√≠a. Su acci√≥n combinada es crucial para la salud √≥sea y para prevenir la calcificaci√≥n de los tejidos blandos que rodean el disco, asegurando as√≠ un correcto flujo de nutrientes.</p>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-4">
                        <div class="bg-[#E9E4D8] p-6 rounded-2xl w-full md:w-1/3">
                            <h4 class="font-bold text-lg text-[#3B3A36]">Vitamina D3</h4>
                            <p>Aumenta la absorci√≥n de calcio desde el intestino.</p>
                        </div>
                        <div class="text-4xl font-bold text-[#A37E2C] mx-4">+</div>
                        <div class="bg-[#E9E4D8] p-6 rounded-2xl w-full md:w-1/3">
                            <h4 class="font-bold text-lg text-[#3B3A36]">Vitamina K2</h4>
                            <p>Activa prote√≠nas que dirigen el calcio hacia los huesos y lo alejan de arterias y placas terminales.</p>
                        </div>
                    </div>
                     <div class="mt-8 bg-green-100 text-green-800 p-4 rounded-2xl max-w-2xl mx-auto">
                        <p class="font-bold">Resultado: Huesos fuertes y un suministro de nutrientes sin obstrucciones para el disco.</p>
                    </div>
                </div>`
        };

        function wrapLabel(str, maxWidth = 16) {
            if (typeof str !== 'string' || str.length <= maxWidth) return str;
            const words = str.split(' ');
            let lines = [];
            let currentLine = words[0];
            for (let i = 1; i < words.length; i++) {
                if ((currentLine + ' ' + words[i]).length > maxWidth) {
                    lines.push(currentLine);
                    currentLine = words[i];
                } else {
                    currentLine += ' ' + words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            return Array.isArray(label) ? label.join(' ') : label;
        };

        const chartDefaultOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    enabled: true,
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    titleFont: { size: 14, weight: 'bold', family: 'Roboto Slab' },
                    bodyFont: { size: 12, family: 'Source Sans 3' },
                    padding: 10,
                    cornerRadius: 5,
                    callbacks: { title: tooltipTitleCallback }
                }
            }
        };

        function initCharts() {
            new Chart(document.getElementById('discCompositionChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Agua', 'Col√°geno', 'Proteoglicanos'],
                    datasets: [{
                        data: [80, 15, 5],
                        backgroundColor: [ '#5DA5DA', '#FAA43A', '#60BD68'],
                        borderColor: warmNeutralPalette.white,
                        borderWidth: 4,
                    }]
                },
                options: { ...chartDefaultOptions,
                    plugins: {
                        ...chartDefaultOptions.plugins,
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: { color: warmNeutralPalette.dark, font: { family: 'Source Sans 3' } }
                        },
                        title: { display: true, text: 'Composici√≥n de un Disco Sano (%)', color: warmNeutralPalette.dark, font: { size: 16, family: 'Roboto Slab' } }
                    }
                }
            });

            new Chart(document.getElementById('saboteursChart'), {
                type: 'bar',
                data: {
                    labels: [wrapLabel('Tabaquismo'), wrapLabel('Alcohol (Exceso)'), wrapLabel('Az√∫car / Grasas Saturadas')],
                    datasets: [{
                        label: 'Impacto Degenerativo',
                        data: [95, 75, 90],
                        backgroundColor: [warmNeutralPalette.negative+'aa', warmNeutralPalette.negative+'80', warmNeutralPalette.negative+'cc'],
                        borderColor: warmNeutralPalette.negative,
                        borderWidth: 2,
                        borderRadius: 5
                    }]
                },
                options: { ...chartDefaultOptions,
                    indexAxis: 'y',
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const index = elements[0].index;
                            const key = ['smoking', 'alcohol', 'sugar'][index];
                            updateSaboteurExplanation(key);
                        }
                    },
                     onHover: (event, chartElement) => {
                        event.native.target.style.cursor = chartElement[0] ? 'pointer' : 'default';
                     },
                    scales: { x: { ticks: { color: warmNeutralPalette.medium } }, y: { ticks: { color: warmNeutralPalette.dark, font: { size: 14 } } } }
                }
            });
        }
        
        function updateSaboteurExplanation(key) {
             document.getElementById('saboteur-title').textContent = saboteurData[key].title;
             document.getElementById('saboteur-text').textContent = saboteurData[key].text;
        }

        function initBuildersChart() {
            new Chart(document.getElementById('buildersChart'), {
                type: 'bar',
                data: {
                    labels: [wrapLabel('Glucosamina & Condroitina'), wrapLabel('Vitamina C'), wrapLabel('Col√°geno Hidrolizado')],
                    datasets: [{
                        data: [75, 95, 65],
                        backgroundColor: ['#60BD68', '#5DA5DA', '#FAA43A'],
                    }]
                },
                options: { ...chartDefaultOptions, scales: { x: { ticks: { color: warmNeutralPalette.dark } }, y: { ticks: { color: warmNeutralPalette.medium } } } }
            });
        }
        
        function initFightersChart() {
            new Chart(document.getElementById('fightersChart'), {
                type: 'radar',
                data: {
                    labels: ['Anti-Inflamatorio', 'Antioxidante', 'Anti-Catab√≥lico', 'Pro-Anab√≥lico', wrapLabel('Inhibe NF-Œ∫B')],
                    datasets: [{
                        label: 'Curcumina',
                        data: [9, 8, 8, 5, 9],
                        backgroundColor: 'rgba(250, 164, 58, 0.2)',
                        borderColor: '#FAA43A',
                        pointBackgroundColor: '#FAA43A'
                    }, {
                        label: 'Resveratrol',
                        data: [7, 9, 7, 8, 6],
                        backgroundColor: 'rgba(93, 165, 218, 0.2)',
                        borderColor: '#5DA5DA',
                        pointBackgroundColor: '#5DA5DA'
                    }]
                },
                options: {
                    ...chartDefaultOptions,
                    plugins: {...chartDefaultOptions.plugins, legend: { display: true, position: 'bottom', labels: {color: warmNeutralPalette.dark, font: { family: 'Source Sans 3' }}}},
                    scales: { r: { pointLabels: { font: { size: 12 } }, angleLines: { color: warmNeutralPalette.light }, grid: { color: warmNeutralPalette.light }, ticks: { display: false } } }
                }
            });
        }

        function handleToolkitTabs(tabName) {
            const contentEl = document.getElementById('toolkit-content');
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            
            contentEl.innerHTML = toolkitContent[tabName];
            
            if (tabName === 'builders') initBuildersChart();
            if (tabName === 'fighters') initFightersChart();
        }

        document.addEventListener('DOMContentLoaded', () => {
            initCharts();
            
            const flowNodes = document.querySelectorAll('.flow-node');
            flowNodes.forEach(node => {
                node.addEventListener('click', () => {
                    flowNodes.forEach(n => n.classList.remove('active'));
                    node.classList.add('active');
                    const key = node.id.split('-')[1];
                    document.getElementById('flow-explanation').classList.remove('opacity-0');
                    document.getElementById('flow-text').innerHTML = `<strong>${flowData[key].title}</strong>: ${flowData[key].text}`;
                });
            });

            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    handleToolkitTabs(tab.dataset.tab);
                });
            });
            handleToolkitTabs('builders');

            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
                        });
                    }
                });
            }, { rootMargin: '-50% 0px -50% 0px' });
            sections.forEach(sec => observer.observe(sec));
        });

    </script>

    <div class="back-to-menu-container">
        <a href="index.html" class="back-to-menu">Volver al men√∫ inicial</a>
    </div>
</body>
</html>
